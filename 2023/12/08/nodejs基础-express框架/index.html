<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>nodejs基础+express框架 | 天天开心</title><meta name="author" content="Sun"><meta name="copyright" content="Sun"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="nodejs基础+express框架node基础知识思维导图   终端小命令   nodejs是不能使用DOM，BOM的api的  浏览器中的JavaScript  node.js中的顶级对象为global，并非是window。 Buffer1. 概念 Buffer 是一个类似于数组的 对象 ，用于表示固定长度的字节序列 Buffer 本质是一段内存空间，专门用来处理 二进制数据 。 创建 Buf">
<meta property="og:type" content="article">
<meta property="og:title" content="nodejs基础+express框架">
<meta property="og:url" content="https://ggboy001.github.io/2023/12/08/nodejs%E5%9F%BA%E7%A1%80-express%E6%A1%86%E6%9E%B6/index.html">
<meta property="og:site_name" content="天天开心">
<meta property="og:description" content="nodejs基础+express框架node基础知识思维导图   终端小命令   nodejs是不能使用DOM，BOM的api的  浏览器中的JavaScript  node.js中的顶级对象为global，并非是window。 Buffer1. 概念 Buffer 是一个类似于数组的 对象 ，用于表示固定长度的字节序列 Buffer 本质是一段内存空间，专门用来处理 二进制数据 。 创建 Buf">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg">
<meta property="article:published_time" content="2023-12-08T08:14:30.000Z">
<meta property="article:modified_time" content="2023-12-08T08:21:28.501Z">
<meta property="article:author" content="Sun">
<meta property="article:tag" content="编程, 感悟, 生活, 前端">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://ggboy001.github.io/2023/12/08/nodejs%E5%9F%BA%E7%A1%80-express%E6%A1%86%E6%9E%B6/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Sun","link":"链接: ","source":"来源: 天天开心","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#95a5a6","bgDark":"#12264f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'nodejs基础+express框架',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-12-08 16:21:28'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="./self/css/universe.css"><link rel="stylesheet" href="./self/css/definedbyme.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/static-butterfly/dist/css/index.min.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="天天开心" type="application/atom+xml">
</head><body><script>window.paceOptions = {
  restartOnPushState: false
}

document.addEventListener('pjax:send', () => {
  Pace.restart()
})
</script><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/xlenco/JS-X@main/pace.js/pace.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="天天开心"><span class="site-name">天天开心</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">nodejs基础+express框架</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-12-08T08:14:30.000Z" title="发表于 2023-12-08 16:14:30">2023-12-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-12-08T08:21:28.501Z" title="更新于 2023-12-08 16:21:28">2023-12-08</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>23分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="nodejs基础+express框架"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="nodejs基础-express框架"><a href="#nodejs基础-express框架" class="headerlink" title="nodejs基础+express框架"></a>nodejs基础+express框架</h1><h4 id="node基础知识思维导图"><a href="#node基础知识思维导图" class="headerlink" title="node基础知识思维导图"></a>node基础知识思维导图</h4><p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081611494.png" alt="nodejs"></p>
<blockquote>
<p> 终端小命令</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606160.png" alt="image-20231017140815509"></p>
<p>nodejs是不能使用DOM，BOM的api的</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606161.png" alt="image-20231017141658490"></p>
<p>浏览器中的JavaScript</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606162.png" alt="image-20231017141730879"></p>
<p>node.js中的顶级对象为global，并非是window。</p>
<h2 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h2><p>1. <strong>概念</strong></p>
<p>Buffer 是一个类似于数组的 对象 ，用于表示固定长度的字节序列</p>
<p>Buffer 本质是一段内存空间，专门用来处理 二进制数据 。</p>
<p>创建 Buffer</p>
<ol>
<li><p>Buffer.alloc</p>
</li>
<li><p>Buffer.allocUnsafe</p>
</li>
<li><p>Buffer.from</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//通过字符串创建 Buffer</span><br><span class="line">let buf_3 = Buffer.from(&#x27;hello&#x27;);</span><br><span class="line">//通过数组创建 Buffer</span><br><span class="line">let buf_4 = Buffer.from([ 105 , 108 , 111 , 118 , 101 , 121 , 111 , 117 ]);</span><br></pre></td></tr></table></figure>

<p>可以借助 toString 方法将 Buffer 转为字符串</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let buf_4 = Buffer.from([ 105 , 108 , 111 , 118 , 101 , 121 , 111 , 117 ]);</span><br><span class="line">console.log(buf_4.toString())</span><br></pre></td></tr></table></figure>

<h2 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h2><p>全是api，只需要知道参数就可以了呗</p>
<p>vscode编辑器保存你修改的内容到文件,就有可能用到fs模块</p>
<h3 id="文件写入"><a href="#文件写入" class="headerlink" title="文件写入"></a>文件写入</h3><p>writeFile 异步写入 语法： fs.writeFile(file, data[, options], callback) </p>
<p>参数说明：</p>
<p> file 文件名</p>
<p> data 待写入的数据</p>
<p> options 选项设置 （可选）</p>
<p> callback 写入回调</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">fs.writeFile(&#x27;./我无敌.txt&#x27;, &#x27;我真的可以无敌的&#x27;, (err) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(&#x27;成功了&#x27;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>文件追加写入：</p>
<p>appendFile</p>
<p>流式写入:</p>
<p>createWriteStream </p>
<blockquote>
<p>程序打开一个文件是需要消耗资源的 ，流式写入可以减少打开关闭文件的次数。 流式写入方式适用于 大文件写入或者频繁写入 的场景, writeFile 适合于 写入频率较低的场景</p>
</blockquote>
<h3 id="文件写入场景"><a href="#文件写入场景" class="headerlink" title="文件写入场景"></a>文件写入场景</h3><ul>
<li>当 需要持久化保存数据 的时候，应该想到 文件写入</li>
</ul>
<p>下载文件 </p>
<p>安装软件 </p>
<p>保存程序日志，如 Git </p>
<p>编辑器保存文件 </p>
<p>视频录制</p>
<h3 id="文件读取"><a href="#文件读取" class="headerlink" title="文件读取"></a>文件读取</h3><p>语法： fs.readFile(path[, options], callback) </p>
<p>参数说明： </p>
<p>path 文件路径 </p>
<p>options 选项配置 </p>
<p>callback 回调函数</p>
<p>回调里面有两个参数err，data</p>
<p>文件读取的应用场景：</p>
<p>电脑开机</p>
<p> 程序运行 </p>
<p>编辑器打开文件 </p>
<p>查看图片 </p>
<p>播放视频 </p>
<p>播放音乐</p>
<p> Git 查看日志 </p>
<p>上传文件</p>
<p> 查看聊天记录（qq聊天漫游记录，开了保存云端，没开保存本地，也就说明你打开聊天窗口，需要在本地读取文件）</p>
<h4 id="文件流式读取"><a href="#文件流式读取" class="headerlink" title="文件流式读取"></a>文件流式读取</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/创建读取流对象</span><br><span class="line">let rs = fs.createReadStream(&#x27;./观书有感.txt&#x27;);</span><br><span class="line">//每次取出 64k 数据后执行一次 data 回调</span><br><span class="line">rs.on(&#x27;data&#x27;, data =&gt; &#123;</span><br><span class="line">console.log(data);</span><br><span class="line">console.log(data.length);</span><br><span class="line">&#125;);</span><br><span class="line">//读取完毕后, 执行 end 回调</span><br><span class="line">rs.on(&#x27;end&#x27;, () =&gt; &#123;</span><br><span class="line">console.log(&#x27;读取完成&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="文件复制"><a href="#文件复制" class="headerlink" title="文件复制"></a>文件复制</h3><p>两种方式：</p>
<ul>
<li><p>读取写入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">fs.readFile(&#x27;./我无敌.txt&#x27;, (err, data) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">    fs.writeFile(&#x27;./我无敌2.txt&#x27;, data, error =&gt; &#123;</span><br><span class="line">        if (error) &#123;</span><br><span class="line">            console.log(&#x27;出错了&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


</li>
<li><p>流式读取写入（没有找到rs中的on）</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">let rs = fs.createReadStream(&#x27;./我无敌.txt&#x27;)</span><br><span class="line">console.log(rs);</span><br><span class="line">let ws = fs.createWriteStream(&#x27;./我无敌3.txt&#x27;)</span><br><span class="line">rs.on(&#x27;data&#x27;, chunk =&gt; &#123;</span><br><span class="line">    ws.write(chunk)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="文件重命名和移动"><a href="#文件重命名和移动" class="headerlink" title="文件重命名和移动"></a>文件重命名和移动</h3><p>rename</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">fs.rename(&#x27;./我无敌2.txt&#x27;, &#x27;./test/wowudi.txt&#x27;, err =&gt; &#123;</span><br><span class="line">    console.log(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="文件删除"><a href="#文件删除" class="headerlink" title="文件删除"></a>文件删除</h3><p>unlink</p>
<h2 id="文件夹-目录操作"><a href="#文件夹-目录操作" class="headerlink" title="文件夹&#x2F;目录操作"></a>文件夹&#x2F;目录操作</h2><p>其实都有同步异步的接口,这里只写了异步的接口,常用,同步就是加一个sync</p>
<h3 id="创建文件夹"><a href="#创建文件夹" class="headerlink" title="创建文件夹"></a>创建文件夹</h3><p>fs.mkdir(path[, options], callback)</p>
<p>path 文件夹路径 </p>
<p>options 选项配置（ 可选 ） </p>
<p>callback 操作后的回调</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">fs.mkdir(&#x27;./page&#x27;, err =&gt; &#123;</span><br><span class="line">if(err) throw err;</span><br><span class="line">console.log(&#x27;创建成功&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">//递归异步创建</span><br><span class="line">fs.mkdir(&#x27;./1/2/3&#x27;, &#123;recursive: true&#125;, err =&gt; &#123;</span><br><span class="line">if(err) throw err;</span><br><span class="line">console.log(&#x27;递归创建成功&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">//递归同步创建文件夹</span><br><span class="line">fs.mkdirSync(&#x27;./x/y/z&#x27;, &#123;recursive: true&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="读取文件夹"><a href="#读取文件夹" class="headerlink" title="读取文件夹"></a>读取文件夹</h3><p>fs.readdir(path[, options], callback)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//异步读取</span><br><span class="line">fs.readdir(&#x27;./论语&#x27;, (err, data) =&gt; &#123;</span><br><span class="line">if(err) throw err;</span><br><span class="line">console.log(data);</span><br><span class="line">&#125;);</span><br><span class="line">//同步读取</span><br><span class="line">let data = fs.readdirSync(&#x27;./论语&#x27;);</span><br><span class="line">console.log(data);</span><br></pre></td></tr></table></figure>

<h3 id="删除文件夹"><a href="#删除文件夹" class="headerlink" title="删除文件夹"></a>删除文件夹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//异步删除文件夹</span><br><span class="line">fs.rmdir(&#x27;./page&#x27;, err =&gt; &#123;</span><br><span class="line">if(err) throw err;</span><br><span class="line">console.log(&#x27;删除成功&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">//异步递归删除文件夹</span><br><span class="line">fs.rmdir(&#x27;./1&#x27;, &#123;recursive: true&#125;, err =&gt; &#123;</span><br><span class="line">if(err) &#123;</span><br><span class="line">console.log(err);</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#x27;递归删除&#x27;)</span><br><span class="line">&#125;);</span><br><span class="line">//同步递归删除文件夹</span><br><span class="line">fs.rmdirSync(&#x27;./x&#x27;, &#123;recursive: true&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="全局对象"><a href="#全局对象" class="headerlink" title="全局对象"></a>全局对象</h2><p>js中特殊的一个对象，它及其所有属性都可以在程序的任何地方访问，即全局变量。</p>
<p>在浏览器 JavaScript 中，通常 window 是全局对象， 而 Node.js 中的全局对象是 global，所有全局变量（除了 global 本身以外）都是 global 对象的属性。</p>
<h3 id="dirname"><a href="#dirname" class="headerlink" title="__dirname"></a>__dirname</h3><p>__dirname 与 require 类似，都是 Node.js 环境中的’全局’变量 __dirname 保存着 当前文件所在目录的绝对路径 ，可以使用 __dirname 与文件名拼接成绝对路径 __</p>
<p> 使用 fs 模块的时候，尽量使用 __dirname 将路径转化为绝对路径，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">fs.writeFile(__dirname + &#x27;/dirnametest.txt&#x27;, &#x27;testdirname&#x27;, (err) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(&#x27;失败&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="工具模块"><a href="#工具模块" class="headerlink" title="工具模块"></a>工具模块</h2><h3 id="path模块"><a href="#path模块" class="headerlink" title="path模块"></a>path模块</h3><p>主要就是和文件路径相关的api</p>
<p>主要知道第一个就行了</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606163.png" alt="image-20231018105651456"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//就是解决路径拼接不规范的问题</span><br><span class="line">第一个参数是根目录,后面的参数就跟相对路径</span><br><span class="line">path.resolve(__dirname,&#x27;./file.txt&#x27;)</span><br></pre></td></tr></table></figure>





<h2 id="http"><a href="#http" class="headerlink" title="http"></a>http</h2><p>详细的内容可以看看</p>
<p>04_HTTP协议.pdf</p>
<p>常用响应状态码</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606165.png" alt="image-20231018115021134"></p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606166.png" alt="image-20231018115131696"></p>
<p>端口：<br>应用程序的数字标识，主要作用是实现不同主机应用程序之间的通信</p>
<hr>
<h3 id="创建http服务"><a href="#创建http服务" class="headerlink" title="创建http服务"></a>创建http服务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const http = require(&#x27;http&#x27;)</span><br><span class="line">const sever = http.createServer((request, response) =&gt; &#123;</span><br><span class="line">    response.end(&#x27;hello sever&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">sever.listen(9000, () =&gt; &#123;</span><br><span class="line">    console.log(&#x27;服务启动&#x27;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>后端和服务器打交道入门注意事项:</p>
<ul>
<li><p>当服务启动后，更新代码 必须重启服务才能生效</p>
</li>
<li><p>响应内容中文乱码的解决办法</p>
</li>
</ul>
<blockquote>
<p>response.setHeader(‘content-type’,’text&#x2F;html;charset&#x3D;utf-8’)</p>
</blockquote>
<ul>
<li>HTTP 协议默认端口是 80 。HTTPS 协议的默认端口是 443, HTTP 服务开发常用端口有 3000， 8080，8090，9000 等</li>
</ul>
<p>如果端口被其他程序占用，可以使用 资源监视器 找到占用端口的程序，然后使用 任务管理器 关闭 对应的程序</p>
<h3 id="获取http请求报文"><a href="#获取http请求报文" class="headerlink" title="获取http请求报文"></a>获取http请求报文</h3><p>这是在创建服务时的哪个函数的回调函数中的参数里面的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const http=require(&#x27;http&#x27;)</span><br><span class="line">const sever=http.createSever((request,response)=&gt;&#123;</span><br><span class="line">//每当网页向这个服务器发送请求,内部就会执行这个函数,并且这两个形参就是有关于请求和响应的对象</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606167.png" alt="image-20231019103037607"></p>
<p>注意： request.headers 将请求信息转化成一个对象，并将属性名都转化成了『小写』</p>
<h3 id="url模块"><a href="#url模块" class="headerlink" title="url模块"></a>url模块</h3><p>专门用来解析URL的</p>
<p>其实也就相当于request.url,只不过额外封装了一些方法属性</p>
<p>查询路径，这个还是挺重要的内容</p>
<p>url的一个重要方法parse</p>
<p>–额，已经弃用了</p>
<p>第一个参数放request.url</p>
<p>第二个参数可以传递一个布尔值来决定是不是要将query参数解析成一个对象</p>
<p>新方法</p>
<p>使用URL类来实例化一个对象</p>
<p>第一个参数放request.url</p>
<p>第二个参数放域名&#x2F;ip字符串</p>
<p>searchParams参数之后碰到问题再说吧</p>
<h3 id="设置响应报文"><a href="#设置响应报文" class="headerlink" title="设置响应报文"></a>设置响应报文</h3><p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606168.png" alt="image-20231019105639568"></p>
<p>前面的fs文件系统模块已经可以和这里有联系了，将写的html文件用fs读取文件到响应体end中</p>
<h3 id="网页中的URL"><a href="#网页中的URL" class="headerlink" title="网页中的URL"></a>网页中的URL</h3><p>相对路径和绝对路径</p>
<p>一句话：但凡涉及到路径的，&#x2F;开头的和完整路径都是绝对路径，绝对路径的拼接就是与协议主机名端口的拼接。</p>
<p>其余都是相对路径。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606169.png" alt="image-20231019144258995"></p>
<p>项目中主要用绝对路径</p>
<h3 id="MIME类型"><a href="#MIME类型" class="headerlink" title="MIME类型"></a>MIME类型</h3><p>可以通过设置响应头的Content-Type来表明响应体的MIME类型，浏览器会根据这个类型来处理得到的 资源</p>
<p>常见的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">html: &#x27;text/html&#x27;,</span><br><span class="line">css: &#x27;text/css&#x27;,</span><br><span class="line">js: &#x27;text/javascript&#x27;,</span><br><span class="line">png: &#x27;image/png&#x27;,</span><br><span class="line">jpg: &#x27;image/jpeg&#x27;,</span><br><span class="line">gif: &#x27;image/gif&#x27;,</span><br><span class="line">mp4: &#x27;video/mp4&#x27;,</span><br><span class="line">mp3: &#x27;audio/mpeg&#x27;,</span><br><span class="line">json: &#x27;application/json&#x27;</span><br></pre></td></tr></table></figure>

<p>注意:解决乱码问题</p>
<p>就是用response.setHeader(‘content-type’,’text&#x2F;css;charset&#x3D;utf-8’)</p>
<h3 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h3><p>node经常会需要输出本来就有的err错误,可以在node api文档中查找error错误那里找到.</p>
<h3 id="get和post请求场景"><a href="#get和post请求场景" class="headerlink" title="get和post请求场景"></a>get和post请求场景</h3><p>小知识：下面的引入css文件，只要知道具体的文件地址就可以引入到项目中</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606170.png" alt="image-20231019151435886"></p>
<p>先稍微中断一下，学了三四天，当时学完之后感觉非常通透，但过了还不到3天，其实挺多内容都已经忘了，我估计现在都已经遗忘80%了。</p>
<h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><h3 id="模块暴露数据的两种方式："><a href="#模块暴露数据的两种方式：" class="headerlink" title="模块暴露数据的两种方式："></a>模块暴露数据的两种方式：</h3><ul>
<li>module.exports&#x3D;value</li>
<li>exports.value&#x3D;value</li>
</ul>
<p>本质上:modules.exports&#x3D;&#x3D;&#x3D;exports&#x3D;&#x3D;&#x3D;{}</p>
<p>而且通过require导入所暴露的模块,默认就是modules.exports这个对象</p>
<h3 id="导入模块"><a href="#导入模块" class="headerlink" title="导入模块"></a>导入模块</h3><p>就一点:用require导入文件模块时用相对路径(.&#x2F;       ..&#x2F;)</p>
<h4 id="导入文件夹"><a href="#导入文件夹" class="headerlink" title="导入文件夹"></a>导入文件夹</h4><p>本质上:也是导入文件模块</p>
<ol>
<li>先看文件夹下package.json文件的main属性对应的文件,有则导入该文件</li>
<li>否则然后看文件有没有index.js或index.json文件</li>
</ol>
<h3 id="require导入模块的基本流程"><a href="#require导入模块的基本流程" class="headerlink" title="require导入模块的基本流程"></a>require导入模块的基本流程</h3><p>require这个生产线背后有六个小动物:</p>
<p>老鼠说:我把绝对路径和require相对路径拼接成绝对路径</p>
<p>牛牛说:我在一块小缓存中看看有没有这个绝对路径,有的话,我把原先缓存的绝对路径文件中的module.exports这个对象给你</p>
<hr>
<p>老虎说:既然牛牛没有,那我就读取目标文件代码</p>
<p>小兔兔说:我要把老虎给我的代码包裹成自执行函数(这样就可以执行需要导入的文件里面的代码了),来立即执行代码</p>
<p>火龙说:我要缓存这个自执行函数,并给牛牛说我缓存了,下次你就有青蛇给的对象了</p>
<p>青蛇说:既然牛牛没有返回,那我来返回module.exports这个对象吧</p>
<p>本质上:就是你在多次导入自定义模块时,就只要模块中返回的modules.exports这个对象.这个对象有可能已经缓存过了,不再重新扫描文件了.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(11);//这行代码导入模块的文件不需要</span><br><span class="line">module.exports = &quot;tesst&quot;//导入模块的文件只要这个</span><br></pre></td></tr></table></figure>

<p>好处:就是一个项目中引用相同模块时,只缓存一次,就可以多个文件导入,不需要牛牛后面的工序了</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606171.png" alt="image-20231021203456795"></p>
<h2 id="包管理工具"><a href="#包管理工具" class="headerlink" title="包管理工具"></a>包管理工具</h2><p>包：<br>一组特定功能的源码集合</p>
<p>包管理工具：</p>
<p>包管理工具是一个通用的概念，很多编程语言都有包管理工具，所以 掌握好包管理工具非常重要</p>
<p>可以对包进行下载安装，更新删除，上传等操作。</p>
<p>常用的包管理工具 ：</p>
<p>下面列举了前端常用的包管理工具 npm yarn cnpm</p>
<h3 id="require-导入-npm-包基本流程"><a href="#require-导入-npm-包基本流程" class="headerlink" title="require 导入 npm 包基本流程"></a>require 导入 npm 包基本流程</h3><p>其实就是导入文件夹那的知识点</p>
<ol>
<li>在当前文件夹下 node_modules 中寻找同名的文件夹 </li>
<li>在上级目录中下的 node_modules 中寻找同名的文件夹，直至找到磁盘根目录</li>
</ol>
<p>自动向上寻找这个特性也就可以不用重复安装包</p>
<h3 id="很香的小技巧："><a href="#很香的小技巧：" class="headerlink" title="很香的小技巧："></a>很香的小技巧：</h3><p>全局安装nodemon,可以服务端热更新，不用ctrl+c再node了</p>
<p>npm root -g可以查看全局安装目录</p>
<p>环境变量：</p>
<p>当你想要在命令行的任意位置都能打开某个可执行文件时，就可以用环境变量。</p>
<p>需要注意一下cmd是不是管理员。</p>
<h3 id="npm配置命令别名"><a href="#npm配置命令别名" class="headerlink" title="npm配置命令别名"></a>npm配置命令别名</h3><p>通过配置命令别名可以更简单的执行命令 </p>
<p>配置 package.json 中的 scripts 属性</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606172.png" alt="image-20231022124622724"></p>
<p>补充说明：</p>
<ul>
<li>npm start 是项目中常用的一个命令，一般用来启动项目 </li>
<li>npm run 有自动向上级目录查找的特性，跟 require 函数也一样 </li>
<li>对于陌生的项目，我们可以通过查看 scripts 属性来参考项目的一些操作</li>
</ul>
<h3 id="cnpm"><a href="#cnpm" class="headerlink" title="cnpm"></a>cnpm</h3><p>cnpm 是一个淘宝构建的 npmjs.com 的完整镜像，也称为『淘宝镜像』，网址<a target="_blank" rel="noopener" href="https://npmmirror.com/">https://npmmirror.com/</a> </p>
<p>cnpm 服务部署在国内 阿里云服务器上 ， 可以提高包的下载速度</p>
<p>镜像服务器</p>
<p>镜像服务器与主服务器的服务内容都是一样的，只是放在一个不同的地方</p>
<p>npm配置淘宝镜像</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606173.png" alt="image-20231022131528311"></p>
<h3 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h3><p>yarn 是由 Facebook 在 2016 年推出的新的 Javascript 包管理工具</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606174.png" alt="image-20231022133835620"></p>
<h3 id="npm支持你去发布一个包"><a href="#npm支持你去发布一个包" class="headerlink" title="npm支持你去发布一个包"></a>npm支持你去发布一个包</h3><p>这样别人就可以直接下载包使用了</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1gM411W7ex?p=91&vd_source=787dbb8c92d34b12fcdedf7a3334bf09">091_包管理工具_npm发布一个包_哔哩哔哩_bilibili</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606175.png" alt="image-20231022134743883"></p>
<h3 id="牛逼的小技巧："><a href="#牛逼的小技巧：" class="headerlink" title="牛逼的小技巧："></a>牛逼的小技巧：</h3><p>不同的编程语言或操作系统都有包管理工具，很好用的。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606176.png" alt="image-20231022134807066"></p>
<p>linux安装应用程序通常只需要一行命令即可，chaocolatey就是这样的。通过一行命令即可安装应用程序</p>
<p>之后再涉及到各个语言或操作系统包管理工具的相关指令就不会觉得难了，无非就是一些需要记忆的指令和参数罢了</p>
<h2 id="express框架"><a href="#express框架" class="headerlink" title="express框架"></a>express框架</h2><p>简单来说，express 是一个封装好的工具包，封装了很多功能，便于我们开发 WEB 应用（HTTP 服务）</p>
<h3 id="express使用"><a href="#express使用" class="headerlink" title="express使用"></a>express使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//express导包</span><br><span class="line">const express=require(&#x27;express&#x27;)</span><br><span class="line">//初始化express对象</span><br><span class="line">const app=express()//这样就可以使用app上的方法了</span><br></pre></td></tr></table></figure>



<h3 id="express路由"><a href="#express路由" class="headerlink" title="express路由"></a>express路由</h3><p>本质:<br>由请求方法 ， 路径 和 回调函数组成</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//格式</span><br><span class="line">app.&lt;method&gt;(path，callback)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>小知识：手机和电脑连接再同一局域网下。</p>
<p>电脑开启node服务器</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606177.png" alt="image-20231023102757277"></p>
<p>手机可以去访问上面的ipv4地址</p>
<h3 id="获取请求参数"><a href="#获取请求参数" class="headerlink" title="获取请求参数"></a>获取请求参数</h3><p>还是req参数上的一些属性</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606178.png" alt="image-20231023104243183"></p>
<h3 id="获取路由参数"><a href="#获取路由参数" class="headerlink" title="获取路由参数"></a>获取路由参数</h3><p>就是有时候路由当中有些有规则的字符串可以用一个参数来获取这个参数。</p>
<p>就不用每一个都获取然后返回响应体了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.get(&#x27;/:id.html&#x27;, (req, res) =&gt; &#123;</span><br><span class="line">res.send(&#x27;商品详情, 商品 id 为&#x27; + req.params.id);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="设置响应报文-1"><a href="#设置响应报文-1" class="headerlink" title="设置响应报文"></a>设置响应报文</h3><p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606179.png" alt="image-20231023111754994"></p>
<p>send设置响应体</p>
<p>可以连贯操作设置响应</p>
<p>其他响应页挺有用的</p>
<p>redirect重定向</p>
<p>download可以设置被下载的文件</p>
<p>sendFile可以把一个文件当作响应体发过去，就比如响应一个html文件</p>
<h3 id="express中间件"><a href="#express中间件" class="headerlink" title="express中间件"></a>express中间件</h3><p>中间件（Middleware）本质是一个回调函数</p>
<p>中间件函数 可以像路由回调一样访问 请求对象（request） ， 响应对象（response）</p>
<p>中间件的作用：</p>
<p> 就是 使用函数封装公共操作，简化代码</p>
<p>类型：</p>
<p>全局中间件</p>
<p>每一个请求到达服务端都需要执行的</p>
<p>函数在use（）中就可以全局使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(middleware)</span><br></pre></td></tr></table></figure>



<p>路由中间件</p>
<p>只需要对某一些路由进行功能封装</p>
<p>函数在app.get的第二个参数中就可以</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.get(&#x27;/路径&#x27;,`中间件函数1`,`中间件函数2`,(request,response)=&gt;&#123;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h4 id="静态资源中间件"><a href="#静态资源中间件" class="headerlink" title="静态资源中间件"></a>静态资源中间件</h4><p>就是在每次请求时拿到路径和资源中的路径进行比较，如果有就返回。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(&#x27;public&#x27;))//这句代码就是把public文件夹作为静态资源文件夹，发请求填路径的时候不用写public，可以直接选择public下面的文件</span><br></pre></td></tr></table></figure>



<p>小细节：</p>
<p>静态资源和路由哪个先返回</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//请求路径</span><br><span class="line">127.0.0.1:9000/home</span><br><span class="line">//现在有一个home文件和一个home路由</span><br><span class="line">如果静态资源与路由规则同时匹配，谁先匹配谁就响应,通俗说就是app.get和app.use谁在前面</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="解析请求体"><a href="#解析请求体" class="headerlink" title="解析请求体"></a>解析请求体</h3><p>用一个npm中的body-parser包</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;)</span><br><span class="line">const app = express()</span><br><span class="line">const bodyParser = require(&#x27;body-parser&#x27;)</span><br><span class="line">// app.use(express.static(__dirname + &#x27;/dist&#x27;))</span><br><span class="line">// create application/json parser</span><br><span class="line">var jsonParser = bodyParser.json()</span><br><span class="line"></span><br><span class="line">// create application/x-www-form-urlencoded parser</span><br><span class="line">var urlencodedParser = bodyParser.urlencoded(&#123; extended: false &#125;)</span><br><span class="line">app.post(&#x27;/home&#x27;, urlencodedParser, (req, res) =&gt; &#123;</span><br><span class="line">    console.log(req.body);//这是重点</span><br><span class="line">    res.send(&#x27;nihao&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(9000, () =&gt; &#123; &#125;)</span><br></pre></td></tr></table></figure>



<p>防盗链</p>
<p>暂时用不到</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1gM411W7ex?p=112&spm_id_from=pageDriver&vd_source=787dbb8c92d34b12fcdedf7a3334bf09">112_express框架_防盗链实践_哔哩哔哩_bilibili</a></p>
<h3 id="路由模块化"><a href="#路由模块化" class="headerlink" title="路由模块化"></a>路由模块化</h3><p>模块路由.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;)</span><br><span class="line">let router = express.Router()</span><br><span class="line">router.get(&#x27;/home&#x27;, (req, res) =&gt; res.send(&#x27;home&#x27;))</span><br><span class="line">router.get(&#x27;/search&#x27;, (req, res) =&gt; res.send(&#x27;search&#x27;))</span><br><span class="line"></span><br><span class="line">module.exports = router</span><br></pre></td></tr></table></figure>

<p>主文件.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const RouteHome = require(&#x27;./routes/RouteHome&#x27;)</span><br><span class="line"></span><br><span class="line">app.use(RouteHome)</span><br></pre></td></tr></table></figure>

<h3 id="模板引擎"><a href="#模板引擎" class="headerlink" title="模板引擎"></a>模板引擎</h3><p>模板引擎主要就是用来将数据和模板分离开，便于管理更改数据的</p>
<p>就是在发现一些特定的字符串的时候用来解析js表达式的</p>
<p>ejs是一个包</p>
<p>ejs.render函数</p>
<p>负责将第一个参数(字符串,有可能要包含&lt;%&#x3D; 变量名或者就是js表达式%&gt;)中的变量动态替换为第二个参数(对象)中的数据</p>
<p>主文件.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const ejs = require(&#x27;ejs&#x27;)</span><br><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">const str = fs.readFileSync(&#x27;./hello.html&#x27;).toString()</span><br><span class="line">let code = &#123; code: &#x27;12&#x27; &#125;</span><br><span class="line"></span><br><span class="line">let str1 = ejs.render(str, &#123; code &#125;)</span><br><span class="line">console.log(str1);</span><br></pre></td></tr></table></figure>

<p>hello.html文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;</span><br><span class="line">        &lt;%= code%&gt;//这才是重点</span><br><span class="line">    &lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<p>express使用ejs框架详细见</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// view engine setup</span><br><span class="line">app.set(&#x27;views&#x27;, path.join(__dirname, &#x27;views&#x27;));</span><br><span class="line">app.set(&#x27;view engine&#x27;, &#x27;ejs&#x27;);</span><br><span class="line">//views文件夹就是用来放置含有&lt;%= %&gt;的ejs文件</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1gM411W7ex?p=118&vd_source=787dbb8c92d34b12fcdedf7a3334bf09">118_express框架_express中使用ejs_哔哩哔哩_bilibili</a></p>
<h3 id="express-generator"><a href="#express-generator" class="headerlink" title="express-generator"></a>express-generator</h3><p>快速生成express的骨架</p>
<p>使用express指令生成框架</p>
<h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1gM411W7ex?p=120&spm_id_from=pageDriver&vd_source=787dbb8c92d34b12fcdedf7a3334bf09">120_express框架_查看文件上传报文_哔哩哔哩_bilibili</a></p>
<h2 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h2><p>管理数据的数据库</p>
<h3 id="三个核心概念"><a href="#三个核心概念" class="headerlink" title="三个核心概念"></a>三个核心概念</h3><p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606180.png" alt="image-20231024194630081"></p>
<p>Mongoose</p>
<p>Mongoose 是一个对象文档模型库</p>
<p>不过就是一个包，用他的api实现对mongodb数据库的数据的操作</p>
<h4 id="利用mongoose操作数据库步骤："><a href="#利用mongoose操作数据库步骤：" class="headerlink" title="利用mongoose操作数据库步骤："></a>利用mongoose操作数据库步骤：</h4><ol>
<li>导包连接</li>
<li>创建模型（复用和限制数据类型）</li>
</ol>
<blockquote>
<p>用这个模型来对应集合，这个创建模型的方法需要传入设置属性具体的数据类型的对象</p>
</blockquote>
<ol start="3">
<li>使用模型上面的方法来对这个集合实现增删改查的操作</li>
</ol>
<p>方法：</p>
<p>增：create ()</p>
<p>把对象参数插入数据库中</p>
<p>删：delete(one&#x2F;many)</p>
<p>把参数对象(可能只有一个id属性)中的在集合中给删了</p>
<p>改：update(one&#x2F;many)</p>
<p>把第一个参数对象(可能只有一个id属性)中的在集合中进行更改为第二个参数对象</p>
<p>查：find</p>
<p>查找第一个参数对象(空对象查所有),第二个参数数组是需要获得的文档属性</p>
<p>此处还有skip跳过几个数据,limit要几个数据,这两个都是传入数字或字符串</p>
<p>使用场景:</p>
<p>社交媒体应用程序：社交媒体平台通常需要处理大量用户生成的数据，例如个人资料信息、帖子、评论和媒体文件。使用MongoDB可以更方便地存储和管理这些动态的和半结构化的数据。</p>
<p>内容管理系统（CMS）：一些内容管理系统需要管理不同类型的内容，例如文章、图片、视频等。MongoDB可以提供更灵活的数据模型，支持这些不同类型的内容，并且可以轻松地处理不断变化的数据结构。</p>
<h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><p>使用mysql包连接数据库时出现以下报错，主要是因为</p>
<p>mysql8 之前的版本中加密规则是mysql_native_password,而在mysql8之后,加密规则是caching_sha2_password, </p>
<p>我的是mysql8</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;Client does not support authentication protocol requested by server; consider upgrading MySQL client&#x27;</span><br></pre></td></tr></table></figure>

<p>解决之后，注意：用户名是root，以后的密码就是123456，不是ggbond</p>
<h3 id="mysql语法"><a href="#mysql语法" class="headerlink" title="mysql语法"></a>mysql语法</h3><h4 id="增"><a href="#增" class="headerlink" title="增"></a>增</h4><p>执行insert into获得的result是对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO table_name ( field1, field2,...fieldN )</span><br><span class="line">                       VALUES</span><br><span class="line">                       ( value1, value2,...valueN );</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let str = &#x27;insert into library (categoryID) values(?)&#x27;</span><br><span class="line">db.query(str, [&#x27;r1&#x27;], (err, result) =&gt; &#123;</span><br><span class="line">    if (err)</span><br><span class="line">        console.log(err.message);</span><br><span class="line">    console.log(result.affectedRows === 1);//判断是否插入成功</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<p>简便插入</p>
<p>就是当一条记录中有很多属性的时候,可以拿到这个对象(当然对象中的属性因该和数据表中的键名一致)</p>
<p>原理:就是把一个对象按其属性名插入到数据表中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//增的便捷写法</span><br><span class="line">let obj = &#123; categoryID: &#x27;123&#x27;, categoryName: &#x27;书籍&#x27; &#125;</span><br><span class="line">let strAdd = &#x27;insert into library set ?&#x27;</span><br><span class="line">db.query(strAdd, obj, (err, result) =&gt; &#123;</span><br><span class="line">    if (err)</span><br><span class="line">        console.log(err.message);</span><br><span class="line">    console.log(result.affectedRows === 1);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UPDATE table_name SET field1=new-value1, field2=new-value2</span><br><span class="line">[WHERE Clause]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let strUpdate = &#x27;update library set categoryName=? where categoryID=?&#x27;</span><br><span class="line">let obj = &#123; categoryName: &#x27;风景&#x27;, categoryID: &#x27;12&#x27; &#125;</span><br><span class="line">db.query(strUpdate, [obj.categoryName, obj.categoryID], (err, results) =&gt; &#123;</span><br><span class="line">    if (err) console.log(err.message);</span><br><span class="line">    if (results.affectedRows === 1) &#123;</span><br><span class="line">        console.log(&#x27;更新成功&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>便捷更新</p>
<p>原理:就是根据筛选条件把对象中的属性插入数据表中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let strUpdate = &#x27;update library set ? where categoryID=?&#x27;</span><br><span class="line">let obj = &#123; categoryName: &#x27;风景&#x27;, categoryID: &#x27;r2&#x27; &#125;</span><br><span class="line">db.query(strUpdate, [obj, obj.categoryID], (err, results) =&gt; &#123;</span><br><span class="line">    if (err) console.log(err.message);</span><br><span class="line">    if (results.affectedRows === 1) &#123;</span><br><span class="line">        console.log(&#x27;更新成功&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM table_name [WHERE Clause]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>也很简单</p>
<p>标记删除</p>
<p>一般不把数据从数据表中真正删除,而是通过一个字段来标记这个记录是否被删除,防止用户误操作还想要恢复.</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606181.png" alt="image-20231026150614510"></p>
<h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用占位符进行值查询</span><br><span class="line">let str = &#x27;select * from reader where id=? and name=?&#x27;</span><br><span class="line">db.query(str, [&#x27;r1&#x27;, &#x27;2&#x27;], (err, result) =&gt; &#123;</span><br><span class="line">    if (err)</span><br><span class="line">        console.log(err.message);</span><br><span class="line">    console.log(result);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>上面的result只有查询时会是一个数组,其余操作均是对象.</p>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>接口的组成:</p>
<p>请求方法</p>
<p>接口地址</p>
<p>请求参数</p>
<p>响应结果</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606182.png" alt="image-20231026162819443"></p>
<p>RESTful API</p>
<p>主要特点:</p>
<ol>
<li>路径中不要包含动词(create,delete)</li>
<li>操作资源要与请求方法对应</li>
<li>操作结果要与Http响应状态码对应</li>
</ol>
<p>综合运用,Get,Post,Delete,Put这几种方法来对应增删改查</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606183.png" alt="image-20231030154946061"></p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606184.png" alt="image-20231030155622178"></p>
<p>API</p>
<p>就是通过响应json格式来给前端调用接口</p>
<p>其实这个时候不就已经可以实现前后端结合了吗</p>
<p>前端根据路径发送ajax请求</p>
<p>后端根据请求路径做相应的响应，并对数据库做出相应的操作，然后再响应json告诉前端你是否成功，成功可能会给数据供前端渲染。</p>
<h2 id="会话控制"><a href="#会话控制" class="headerlink" title="会话控制"></a>会话控制</h2><p>HTTP 是一种无状态的协议，它没有办法区分多次的请求是否来自于同一个客户端， 无法区分用户 而产品中又大量存在的这样的需求，所以我们需要通过 会话控制 来解决该问题</p>
<p>会话控制：就是用来区分用户的</p>
<p>常见的会话控制的技术：<br>cookie</p>
<p>session</p>
<p>token</p>
<h3 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h3><p>本质来说：就是浏览器用来保存特定数据的一块存储空间</p>
<p>了解：cookie 是按照域名划分保存的</p>
<p>特点：</p>
<p>浏览器向服务器发送请求时，会自动将 当前域名下 可用的 cookie 设置在请求头中，然后传递给服务器</p>
<p>这个请求头的名字也叫 cookie ，所以将 cookie 理解为一个 HTTP 的请求头也是可以的</p>
<p>但是cookie是可以伪造的，不安全。</p>
<h3 id="session"><a href="#session" class="headerlink" title="session"></a>session</h3><p>是保存在服务器端的一块数据，保存当前访问的用户的相关信息</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606185.png" alt="image-20231031130601960"></p>
<p>本质：在登录账号和密码之后，服务器创建session信息，一个session-id的值通过响应头返回给浏览器，</p>
<p>然后浏览器端就有了这个id信息，并把它作为cookie，每次发请求都带着这个cookie来验证用户的身份。一把锁配一把钥匙。</p>
<p>当然这也是可以盗取cookie的，但是服务器端就可以摧毁session，算是加了一层保障</p>
<p>session默认在服务器内存中，容易丢失，保存在数据库或者文件中更合适，</p>
<p>可以利用connect-mongo包可以完成这个操作。</p>
<p>一共用到express-session和connect-mongo两个包来完成，一般搭配使用，在npm中去看看就用问题不大</p>
<p>当然在一些i项目中仍然被大量的使用，但仍然存在着一些问题，但仍然可以使用的。</p>
<h3 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h3><p>基本思路：</p>
<p>就是把后端生成的token给前端保存在localstorage中，然后发请求的时候带着token</p>
<p>后端拿到的token就是什么header+和后端设置的密钥拼合后进行加密</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606186.png" alt="image-20231031153125684"></p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606187.png" alt="image-20231031153200823"></p>
<p>还是利用包，jsonwebtoken</p>
<p>来生成token，解析token看是否过期</p>
<h2 id="业务分层"><a href="#业务分层" class="headerlink" title="业务分层"></a>业务分层</h2><p>MVC(model-view-controller)</p>
<p>router.js:负责将请求分发给C层</p>
<p>controller.js:C层负责处理业务逻辑(V与M的沟通)</p>
<p>view:V层负责展示页面</p>
<p>model:M层负责处理数据(增删改查)</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ggboy001/images/img/202312081606188.png" alt="image-20231030163045380"></p>
<p>routes—controllers—services文件夹</p>
<p>用对象的属性对应方法来进行模块之间的连结</p>
<h3 id="文件上传-1"><a href="#文件上传-1" class="headerlink" title="文件上传"></a>文件上传</h3><p>前端提交文件，就是要拿到这个文件的信息对象信息，放入一个表单对象中（FormData对象），然后发送axios提交的时候需要设置header中的Content-type为mulpart&#x2F;form-data</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const form=&#123;&#125;</span><br><span class="line">let submit=()=&gt;&#123;</span><br><span class="line">let params=new FormData()</span><br><span class="line">for(let i in form)&#123;</span><br><span class="line">params.append(i,form[i])</span><br><span class="line">&#125;</span><br><span class="line">axios.post(&#x27;admin/user&#x27;,params,&#123;header:&#123;</span><br><span class="line">&quot;Content-type&quot;:&quot;mulpart/form-data&quot;</span><br><span class="line">&#125;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>这里需要提前和后端沟通好图片的name属性</p>
<p>后端接收就是使用一个包multer</p>
<p>逻辑就是在后端提交表单发请求后进入后端路由之前使用一个中间件先来接收图片并放在一个文件夹下，这个时候req.file会被multer包绑定一个对象可以在里面获取图片名用于拼接路径。req.body 中就是除了文件之外的表单信息</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://Ggboy001.github.io">Sun</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://ggboy001.github.io/2023/12/08/nodejs%E5%9F%BA%E7%A1%80-express%E6%A1%86%E6%9E%B6/">https://ggboy001.github.io/2023/12/08/nodejs基础-express框架/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://Ggboy001.github.io" target="_blank">天天开心</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2023/12/08/vue3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%AD%A6%E4%B9%A0/" title="vue3基础知识学习"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">vue3基础知识学习</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Sun</div><div class="author-info__description">真不错</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><div class="twopeople"><div class="container" style="height:200px;"><canvas class="illo" width="800" height="800" style="max-width:200px;max-height:200px;touch-action:none;width:640px;height:640px;"></canvas></div><script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js"></script><script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js"></script><script id="rendered-js" src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js"></script><style>.twopeople{margin:0;align-items:center;justify-content:center;text-align:center;}canvas{display:block;margin:0 auto;cursor:move;}</style></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#nodejs%E5%9F%BA%E7%A1%80-express%E6%A1%86%E6%9E%B6"><span class="toc-number">1.</span> <span class="toc-text">nodejs基础+express框架</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#node%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE"><span class="toc-number">1.0.0.1.</span> <span class="toc-text">node基础知识思维导图</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Buffer"><span class="toc-number">1.1.</span> <span class="toc-text">Buffer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.2.</span> <span class="toc-text">文件系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5"><span class="toc-number">1.2.1.</span> <span class="toc-text">文件写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E5%9C%BA%E6%99%AF"><span class="toc-number">1.2.2.</span> <span class="toc-text">文件写入场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96"><span class="toc-number">1.2.3.</span> <span class="toc-text">文件读取</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%B5%81%E5%BC%8F%E8%AF%BB%E5%8F%96"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">文件流式读取</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6"><span class="toc-number">1.2.4.</span> <span class="toc-text">文件复制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E9%87%8D%E5%91%BD%E5%90%8D%E5%92%8C%E7%A7%BB%E5%8A%A8"><span class="toc-number">1.2.5.</span> <span class="toc-text">文件重命名和移动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4"><span class="toc-number">1.2.6.</span> <span class="toc-text">文件删除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%A4%B9-%E7%9B%AE%E5%BD%95%E6%93%8D%E4%BD%9C"><span class="toc-number">1.3.</span> <span class="toc-text">文件夹&#x2F;目录操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">1.3.1.</span> <span class="toc-text">创建文件夹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">1.3.2.</span> <span class="toc-text">读取文件夹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">1.3.3.</span> <span class="toc-text">删除文件夹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.</span> <span class="toc-text">全局对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dirname"><span class="toc-number">1.4.1.</span> <span class="toc-text">__dirname</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7%E6%A8%A1%E5%9D%97"><span class="toc-number">1.5.</span> <span class="toc-text">工具模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#path%E6%A8%A1%E5%9D%97"><span class="toc-number">1.5.1.</span> <span class="toc-text">path模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#http"><span class="toc-number">1.6.</span> <span class="toc-text">http</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAhttp%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.6.1.</span> <span class="toc-text">创建http服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96http%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="toc-number">1.6.2.</span> <span class="toc-text">获取http请求报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#url%E6%A8%A1%E5%9D%97"><span class="toc-number">1.6.3.</span> <span class="toc-text">url模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87"><span class="toc-number">1.6.4.</span> <span class="toc-text">设置响应报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E9%A1%B5%E4%B8%AD%E7%9A%84URL"><span class="toc-number">1.6.5.</span> <span class="toc-text">网页中的URL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MIME%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.6.6.</span> <span class="toc-text">MIME类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">1.6.7.</span> <span class="toc-text">错误处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#get%E5%92%8Cpost%E8%AF%B7%E6%B1%82%E5%9C%BA%E6%99%AF"><span class="toc-number">1.6.8.</span> <span class="toc-text">get和post请求场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">1.7.</span> <span class="toc-text">模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E6%9A%B4%E9%9C%B2%E6%95%B0%E6%8D%AE%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-number">1.7.1.</span> <span class="toc-text">模块暴露数据的两种方式：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97"><span class="toc-number">1.7.2.</span> <span class="toc-text">导入模块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">1.7.2.1.</span> <span class="toc-text">导入文件夹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#require%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-number">1.7.3.</span> <span class="toc-text">require导入模块的基本流程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-number">1.8.</span> <span class="toc-text">包管理工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#require-%E5%AF%BC%E5%85%A5-npm-%E5%8C%85%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-number">1.8.1.</span> <span class="toc-text">require 导入 npm 包基本流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%88%E9%A6%99%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7%EF%BC%9A"><span class="toc-number">1.8.2.</span> <span class="toc-text">很香的小技巧：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#npm%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4%E5%88%AB%E5%90%8D"><span class="toc-number">1.8.3.</span> <span class="toc-text">npm配置命令别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cnpm"><span class="toc-number">1.8.4.</span> <span class="toc-text">cnpm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#yarn"><span class="toc-number">1.8.5.</span> <span class="toc-text">yarn</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#npm%E6%94%AF%E6%8C%81%E4%BD%A0%E5%8E%BB%E5%8F%91%E5%B8%83%E4%B8%80%E4%B8%AA%E5%8C%85"><span class="toc-number">1.8.6.</span> <span class="toc-text">npm支持你去发布一个包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%9B%E9%80%BC%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7%EF%BC%9A"><span class="toc-number">1.8.7.</span> <span class="toc-text">牛逼的小技巧：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#express%E6%A1%86%E6%9E%B6"><span class="toc-number">1.9.</span> <span class="toc-text">express框架</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#express%E4%BD%BF%E7%94%A8"><span class="toc-number">1.9.1.</span> <span class="toc-text">express使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#express%E8%B7%AF%E7%94%B1"><span class="toc-number">1.9.2.</span> <span class="toc-text">express路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">1.9.3.</span> <span class="toc-text">获取请求参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0"><span class="toc-number">1.9.4.</span> <span class="toc-text">获取路由参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87-1"><span class="toc-number">1.9.5.</span> <span class="toc-text">设置响应报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#express%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">1.9.6.</span> <span class="toc-text">express中间件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">1.9.6.1.</span> <span class="toc-text">静态资源中间件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90%E8%AF%B7%E6%B1%82%E4%BD%93"><span class="toc-number">1.9.7.</span> <span class="toc-text">解析请求体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">1.9.8.</span> <span class="toc-text">路由模块化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-number">1.9.9.</span> <span class="toc-text">模板引擎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#express-generator"><span class="toc-number">1.9.10.</span> <span class="toc-text">express-generator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">1.9.11.</span> <span class="toc-text">文件上传</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MongoDB"><span class="toc-number">1.10.</span> <span class="toc-text">MongoDB</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E4%B8%AA%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-number">1.10.1.</span> <span class="toc-text">三个核心概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8mongoose%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-number">1.10.1.1.</span> <span class="toc-text">利用mongoose操作数据库步骤：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql"><span class="toc-number">1.11.</span> <span class="toc-text">mysql</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql%E8%AF%AD%E6%B3%95"><span class="toc-number">1.11.1.</span> <span class="toc-text">mysql语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A2%9E"><span class="toc-number">1.11.1.1.</span> <span class="toc-text">增</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0"><span class="toc-number">1.11.1.2.</span> <span class="toc-text">更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4"><span class="toc-number">1.11.1.3.</span> <span class="toc-text">删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.11.1.4.</span> <span class="toc-text">查询</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.12.</span> <span class="toc-text">接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E6%8E%A7%E5%88%B6"><span class="toc-number">1.13.</span> <span class="toc-text">会话控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cookie"><span class="toc-number">1.13.1.</span> <span class="toc-text">cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session"><span class="toc-number">1.13.2.</span> <span class="toc-text">session</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JWT"><span class="toc-number">1.13.3.</span> <span class="toc-text">JWT</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E5%88%86%E5%B1%82"><span class="toc-number">1.14.</span> <span class="toc-text">业务分层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-1"><span class="toc-number">1.14.1.</span> <span class="toc-text">文件上传</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/12/08/nodejs%E5%9F%BA%E7%A1%80-express%E6%A1%86%E6%9E%B6/" title="nodejs基础+express框架"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="nodejs基础+express框架"/></a><div class="content"><a class="title" href="/2023/12/08/nodejs%E5%9F%BA%E7%A1%80-express%E6%A1%86%E6%9E%B6/" title="nodejs基础+express框架">nodejs基础+express框架</a><time datetime="2023-12-08T08:14:30.000Z" title="发表于 2023-12-08 16:14:30">2023-12-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/08/vue3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%AD%A6%E4%B9%A0/" title="vue3基础知识学习"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="vue3基础知识学习"/></a><div class="content"><a class="title" href="/2023/12/08/vue3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%AD%A6%E4%B9%A0/" title="vue3基础知识学习">vue3基础知识学习</a><time datetime="2023-12-08T08:00:27.000Z" title="发表于 2023-12-08 16:00:27">2023-12-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/20/blog%E5%8F%AF%E4%BB%A5%E5%8A%A0%E5%AF%86-%E7%A5%9E%E5%A5%87/" title="blog可以加密——（原来这么简单password：ggbond）"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="blog可以加密——（原来这么简单password：ggbond）"/></a><div class="content"><a class="title" href="/2023/08/20/blog%E5%8F%AF%E4%BB%A5%E5%8A%A0%E5%AF%86-%E7%A5%9E%E5%A5%87/" title="blog可以加密——（原来这么简单password：ggbond）">blog可以加密——（原来这么简单password：ggbond）</a><time datetime="2023-08-20T15:06:42.000Z" title="发表于 2023-08-20 23:06:42">2023-08-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/20/%E4%BF%AE%E6%AD%A3%E8%87%AA%E5%B7%B1%E7%9A%84%E6%89%93%E5%AD%97%E9%97%AE%E9%A2%98%EF%BC%8C%E8%BF%BD%E6%B1%82%E8%87%AA%E5%B7%B1%E7%9A%84typing%E6%9E%81%E8%87%B4/" title="追求自己的typing极致"><img src="https://cdn.pixabay.com/photo/2015/02/24/15/41/wolf-647528_1280.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="追求自己的typing极致"/></a><div class="content"><a class="title" href="/2023/08/20/%E4%BF%AE%E6%AD%A3%E8%87%AA%E5%B7%B1%E7%9A%84%E6%89%93%E5%AD%97%E9%97%AE%E9%A2%98%EF%BC%8C%E8%BF%BD%E6%B1%82%E8%87%AA%E5%B7%B1%E7%9A%84typing%E6%9E%81%E8%87%B4/" title="追求自己的typing极致">追求自己的typing极致</a><time datetime="2023-08-20T08:23:43.000Z" title="发表于 2023-08-20 16:23:43">2023-08-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/15/vue2%E5%AD%A6%E4%B9%A0/" title="vue2学习"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="vue2学习"/></a><div class="content"><a class="title" href="/2023/08/15/vue2%E5%AD%A6%E4%B9%A0/" title="vue2学习">vue2学习</a><time datetime="2023-08-15T15:45:21.000Z" title="发表于 2023-08-15 23:45:21">2023-08-15</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 By Sun</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><canvas id="universe"></canvas><script defer  type="text/javascript" src="./self/js/universe.js"></script><script defer src="https://rmt.dogedoge.com/fetch/~/source/jsdelivr/gh/CodeByZach/pace/pace.min.js"></script><script>(() => {
  const isChatBtn = true
  const isChatHideShow = false

  if (isChatBtn) {
    const close = () => {
      Chatra('minimizeWidget')
      Chatra('hide')
    }

    const open = () => {
      Chatra('openChat', true)
      Chatra('show')
    }

    window.ChatraSetup = {
      startHidden: true
    }
  
    window.chatBtnFn = () => {
      const isShow = document.getElementById('chatra').classList.contains('chatra--expanded')
      isShow ? close() : open()
    }
  } else if (isChatHideShow) {
    window.chatBtn = {
      hide: () => {
        Chatra('hide')
      },
      show: () => {
        Chatra('show')
      }
    }
  }

  (function(d, w, c) {
    w.ChatraID = 'EssvSpDPHWLEEh7md'
    var s = d.createElement('script')
    w[c] = w[c] || function() {
        (w[c].q = w[c].q || []).push(arguments)
    }
    s.async = true
    s.src = 'https://call.chatra.io/chatra.js'
    if (d.head) d.head.appendChild(s)
  })(document, window, 'Chatra')

})()</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>